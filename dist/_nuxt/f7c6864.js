(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{452:function(t,e,o){"use strict";var n={data:function(){return{snackBar:!1,text:"",color:"info"}}},r=o(91),c=o(125),l=o.n(c),d=o(224),v=o(184),f=o(610),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-snackbar",{attrs:{timeout:"5000",color:t.color},model:{value:t.snackBar,callback:function(e){t.snackBar=e},expression:"snackBar"}},[o("div",{staticClass:"d-flex justify-space-between"},[o("span",{staticClass:"white--text align-self-center"},[t._v(t._s(t.text))]),t._v(" "),o("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){t.snackBar=!1}}},[o("v-icon",[t._v("mdi-close")])],1)],1)])}),[],!1,null,null,null);e.a=component.exports;l()(component,{VBtn:d.a,VIcon:v.a,VSnackbar:f.a})},483:function(t,e,o){var content=o(545);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(21).default)("1ea172c7",content,!0,{sourceMap:!1})},544:function(t,e,o){"use strict";o(483)},545:function(t,e,o){var n=o(20)(!1);n.push([t.i,".mayusculas{text-transform:uppercase}",""]),t.exports=n},621:function(t,e,o){"use strict";o.r(e);o(5),o(447),o(30);var n={components:{SnackBar:o(452).a},data:function(){return{drawer:null,valid:!0,usuario:"",cantidad:1,codigo:"",descripcion:"",rules:{required:function(t){return!!t||"Requerido"},usuario:{min:function(t){return t.length>=3||"Mínimo 3 caractéres"},max:function(t){return t.length<=10||"Máximo 10 caractéres"}},cantidad:{cant:function(t){return 0!=t||"Incorrecto"}},codigo:{min:function(t){return t.length>=1||"Mínimo 1 caractér"},max:function(t){return t.length<=16||"Máximo 16 caractéres"}}},origin:"",hostname:"",dialog:!1,lotes:[],items:[],item:{},etiqueta:null,overlay:!0,loadingItems:!1,loadingLotes:!1,loadingGrabar:!1}},mounted:function(){this.origin=window.location.origin,this.getItems(),this.getLotes()},methods:{getItems:function(){var t=this;this.overlay=!0,this.loadingItems=!0,this.items=[],this.$axios("/api/items").then((function(e){t.items=e.data})).catch((function(t){console.log("err",t)})).finally((function(){t.overlay=!1,t.loadingItems=!1,console.log("Fin de carga (items)")}))},getLotes:function(){var t=this;this.overlay=!0,this.loadingLotes=!0,this.lotes=[],this.$axios("/api/lotes").then((function(e){t.lotes=e.data})).catch((function(t){console.log("err",t)})).finally((function(){t.overlay=!1,t.loadingLotes=!1,console.log("Fin de carga (lotes)"),t.hostname=window.location.hostname,""!=t.usuario&&t.usuario?t.codigoFocus():t.dialog=!0}))},getLote:function(t){},enterForm:function(){var t=this;if(this.item={},this.valid){var e="";this.codigo&&"L"==this.codigo.substr(0,1)?(!0,this.codigo=this.codigo.substr(0,1)+this.codigo.substr(1).padStart(6,"0"),e="/api/lote/?opt=inventario&codigo=".concat(this.codigo,"&cantidad=").concat(this.cantidad)):(!1,e="/api/catalogo/?opt=inventario&codigo=".concat(this.codigo,"&cantidad=").concat(this.cantidad)),this.loadingGrabar=!0,this.$axios.get(e).then((function(e){console.log("resp",e.data),200==e.data.response?(t.item=e.data.data,t.codigo=""):(t.$refs.snackBar.text="Producto Inexistente",t.$refs.snackBar.color="orange darken-4",t.$refs.snackBar.snackBar=!0),t.cantidad=1})).catch((function(e){console.log("Error",e),t.$refs.snackBar.text=e,t.$refs.snackBar.color="orange darken-4",t.$refs.snackBar.snackBar=!0})).finally((function(){t.loadingGrabar=!1,t.codigoFocus()}))}else this.cantidad&&(this.codigo||this.codigoFocus())},grabar:function(){console.log("wait...")},codigoFocus:function(){var t=this;this.$nextTick((function(){t.$refs.codigo.$el.getElementsByTagName("input")[0].focus()}))}},filters:{formatFecha:function(t){return(t&&""!=t?new Date(t):new Date).toLocaleString("es-MX",{timeZone:"America/Tijuana",year:"numeric",month:"2-digit",day:"2-digit"})}}},r=(o(544),o(91)),c=o(125),l=o.n(c),d=o(410),v=o(224),f=o(436),m=o(418),h=o(443),x=o(412),_=o(611),k=o(548),y=o(184),C=o(458),w=o(191),V=o(187),B=o(446),F=o(416),T=o(604),E=o(51),M=o(198),L=o(484),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",{attrs:{id:"lectura"}},[o("v-overlay",{attrs:{value:t.overlay}},[o("v-progress-circular",{attrs:{indeterminate:"",size:"60"}})],1),t._v(" "),o("v-container",{staticClass:"fill-height column",attrs:{fluid:""}},[o("v-row",{attrs:{align:"center",justify:"center"}},[o("v-col",{attrs:{cols:"12",sm:"12",md:"8"}},[o("v-card",{staticClass:"elevation-12"},[o("v-toolbar",{attrs:{color:"primary",dark:"",flat:"",dense:""}},[o("v-toolbar-title",[t._v("Inventario General")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-toolbar-title",[t._v(t._s(t.usuario))]),t._v(" "),o("v-spacer"),t._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},"v-btn",r,!1),n),[o("v-icon",[t._v("mdi-account")])],1)]}}])},[t._v(" "),o("span",[t._v("Información del Usuario")])])],1),t._v(" "),o("v-card-text",[o("v-form",{ref:"form",nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterForm.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-text-field",{ref:"codigo",staticClass:"mb-3",attrs:{label:"Código o Etiqueta",name:"codigo","prepend-icon":"mdi-barcode",type:"text",clearable:"",rules:[t.rules.required,t.rules.codigo.min,t.rules.codigo.max],disabled:t.loadingGrabar,autocomplete:"off",autofocus:""},on:{input:function(e){t.codigo=t.codigo?t.codigo.toUpperCase():""}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.item.MPART,expression:"item.MPART"}]},[o("div",{staticClass:"text-subtitle-1 text-center"},[t._v("Código: "+t._s(t.item.MPART))]),t._v(" "),o("div",{staticClass:"text-subtitle-1 text-center"},[t._v(t._s(t.item.MDESC))]),t._v(" "),o("div",{staticClass:"text-subtitle-1 text-center"},[t._v("Cod. Barras: "+t._s(t.item.MBARCODE))]),t._v(" "),o("div",{staticClass:"text-subtitle-1 text-center"},[t._v("Existencia: "+t._s(t.item.MEXISTE))])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.item.LOTE,expression:"item.LOTE"}]},[o("div",{staticClass:"text-subtitle-1 text-center"},[t._v("Lote: "+t._s(t.item.LOTE))]),t._v(" "),o("div",{staticClass:"text-subtitle-1 text-center"},[t._v("F. Caducidad: "+t._s(t._f("formatFecha")(t.item.FCADUC)))])]),t._v(" "),o("v-text-field",{staticClass:"mt-4",attrs:{label:"Cantidad",name:"cantidad","prepend-icon":"mdi-numeric",type:"number",rules:[function(t){return!!t||"La Cantidad es requerida"},function(t){return t>=-9999&&t<=9999&&0!=t||"Cantidad incorrecta"}]},model:{value:t.cantidad,callback:function(e){t.cantidad=e},expression:"cantidad"}})],1)],1),t._v(" "),o("v-card-actions",[o("div",{staticClass:"flex-grow-1"}),t._v(" "),o("v-btn",{attrs:{color:"primary",loading:t.loadingGrabar,disabled:!t.valid},on:{click:t.enterForm}},[t._v("Grabar")])],1)],1)],1)],1)],1),t._v(" "),o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-toolbar",{attrs:{color:"primary",dense:""}},[o("v-toolbar-title",{attrs:{dark:""}},[t._v("Indicar Usuario")])],1),t._v(" "),o("v-card-text",[o("v-text-field",{staticClass:"mt-4",attrs:{label:"Usuario",rules:[function(t){return!!t||"Requerido"},function(t){return t.length>=3||"Mínimo 3 caractéres"},function(t){return t.length<=10||"Máximo 10 caractéres"}],maxlength:"10",autofocus:""},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.dialog=!t.usuario}},model:{value:t.usuario,callback:function(e){t.usuario=e},expression:"usuario"}})],1),t._v(" "),o("v-card-actions",[o("v-btn",{attrs:{color:"primary",block:"",dark:"",disabled:!t.usuario},nativeOn:{click:function(e){t.dialog=!1,t.codigoFocus()}}},[t._v("Continuar")])],1)],1)],1)],1),t._v(" "),o("snack-bar",{ref:"snackBar"})],1)}),[],!1,null,null,null);e.default=component.exports;l()(component,{VApp:d.a,VBtn:v.a,VCard:f.a,VCardActions:m.a,VCardText:m.b,VCol:h.a,VContainer:x.a,VDialog:_.a,VForm:k.a,VIcon:y.a,VLayout:C.a,VOverlay:w.a,VProgressCircular:V.a,VRow:B.a,VSpacer:F.a,VTextField:T.a,VToolbar:E.a,VToolbarTitle:M.b,VTooltip:L.a})}}]);
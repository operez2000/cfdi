(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{434:function(e){e.exports=JSON.parse('{"backEndUrl":"http://192.168.1.5:8888","baseUrl":"http://192.168.1.5:3001","dbfLocation":"c:/oscar/gusher","pac":{"cuenta":"gusher","user":"administrador","password":"$9KVnl81"}}')},452:function(e,t,r){"use strict";var o={data:function(){return{snackBar:!1,text:"",color:"info"}}},n=r(91),l=r(125),c=r.n(l),d=r(224),m=r(184),f=r(610),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-snackbar",{attrs:{timeout:"5000",color:e.color},model:{value:e.snackBar,callback:function(t){e.snackBar=t},expression:"snackBar"}},[r("div",{staticClass:"d-flex justify-space-between"},[r("span",{staticClass:"white--text align-self-center"},[e._v(e._s(e.text))]),e._v(" "),r("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){e.snackBar=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1)])}),[],!1,null,null,null);t.a=component.exports;c()(component,{VBtn:d.a,VIcon:m.a,VSnackbar:f.a})},489:function(e,t,r){var content=r(574);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(21).default)("762779ab",content,!0,{sourceMap:!1})},573:function(e,t,r){"use strict";r(489)},574:function(e,t,r){var o=r(20)(!1);o.push([e.i,"::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{border-radius:10px}::-webkit-scrollbar-thumb{background:#a4a4a4;border-radius:10px}::-webkit-scrollbar-thumb:hover{background:#777}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}tbody,tr{cursor:pointer}",""]),e.exports=o},619:function(e,t,r){"use strict";r.r(t);var o=r(29),n=r(17),l=(r(87),r(5),r(30),r(447),r(70),r(126),r(23),r(205),r(291),r(26),r(199),r(452)),c=r(28),d=r(27),m=Object(c.a)((function e(){Object(d.a)(this,e),this.motivosCancelacion=["01 - Comprobante emitido con errores con relación","02 - Comprobante emitido con errores sin relación","03 - No se llevó a cabo la operación","04 - Operación nominativa relacionada en la factura global"],this.regimenesFiscales=["601 - General de Ley Personas Morales","603 - Personas Morales con Fines no Lucrativos","605 - Sueldos y Salarios e Ingresos Asimilados a Salarios - ","606 - Arrendamiento","607 - Régimen de Enajenación o Adquisición de Bienes","608 - Demás ingresos","610 - Residentes en el Extranjero sin Establecimiento Permanente en México","611 - Ingresos por Dividendos (socios y accionistas)","612 - Personas Físicas con Actividades Empresariales y Profesionales","614 - Ingresos por intereses","615 - Régimen de los ingresos por obtención de premios","616 - Sin obligaciones fiscales","620 - Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621 - Incorporación Fiscal","622 - Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623 - Opcional para Grupos de Sociedades","624 - Coordinados","625 - Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626 - Régimen Simplificado de Confianza"],this.formasDePago=["01 - Efectivo","02 - Cheque nominativo","03 - Transferencia electrónica de fondos","04 - Tarjeta de crédito","28 - Tarjeta de débito","99 - Por definir"],this.usosCfdi=["G01 - Adquisicion de Mercancias","G03 - Gastos en General","D01 - Honorarios médicos, dentales y gastos hospitalarios","D02 - Gastos médicos por incapacidad o discapacidad","D07 - Primas por seguros de gastos médicos"],this.metodosDePago=["PUE","PPD"],this.formatNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e="string"==typeof e?Number(e):e,new Intl.NumberFormat("es-MX",{minimumFractionDigits:t,maximumFractionDigits:t}).format(e)}})),f=r(434),v={components:{SnackBar:l.a},data:function(){return{dialog:{login:!0},usuario:"",clave:"",viewPassword:!1,alert:{active:!1,msg:"",type:""},warning:{active:!1,msg:"",type:""},serie:"",folio:"",domicilioFiscal:"",facturaOriginal:{folio:"",pdfBase64:"",xml:"",uuid:"",fecha:"",metodoPago:"",formaPago:"",usoCfdi:"",condiciones:"Contado",data:{Total:0},detalle:{Total:0}},recibo:{caja:"",folio:"",cajaFolio:"",fecha:"",importe:0,tipo:"",cancelada:""},cliente:{recNo:0,rfc:"",numero:"",razonSocial:"",razonSocial1:"",razonSocial2:"",domicilio:"",numExterior:"",numInterior:"",colonia:"",ciudad:"",estado:"",codPos:"",tel1:"",tel2:"",curp:"",email:"",regFiscal:"",nuevo:!0},factura:{folio:"",pdfBase64:"",xml:"",uuid:""},loaders:{usuario:!1,recuperarFolio:!1,abrirPdf:!1,buscarCliente:!1,autoComplete:!1,search:!1,grabaCliente:!1,tablaFactura:!1,generaFactura:!1},motivosCancelacion:null,motivoCancelacion:null,tab:null,regimenesFiscales:[],autoComplete:"",clientes:[],search:"",dlgBuscar:!1,tabla:{headers:[{text:"Nombre del Cliente",value:"mNombre",sortable:!0},{text:"RFC",value:"mRFC"}],clientes:[],pagination:{page:1,itemsPerPage:10,pageStart:1,pageStop:0,pageCount:0,itemsLenght:1}},tablaFactura:{headers:[{text:"Cantidad",value:"Cantidad",sortable:!0,align:"center"},{text:"Código",value:"NoIdentificacion"},{text:"Clave SAT",value:"ClaveProdServ"},{text:"Descripción",value:"Descripcion"},{text:"Precio Unit",value:"ValorUnitario",align:"right"},{text:"Sub-Total",value:"subTotal",align:"right"},{text:"Descuento",value:"Descuento",align:"right"},{text:"Sub-Total",value:"total",align:"right"},{text:"Tasa",value:"Impuestos.Traslados[0].TasaOCuota",align:"center"},{text:"Impuesto",value:"Impuestos.Traslados[0].Importe",align:"right"},{text:"Total",value:"totalNeto",align:"right"}],items:[],detalle:{}},footerProps:{showFirstLastPage:!0,"items-per-page-text":"Registros por pag.","items-per-page-all-text":"Todos","page=text":"Página"},forms:{cliente:!1,detalle:!1},formaPago:null,metodoPago:null,usoCfd:null,utils:new m}},created:function(){},mounted:function(){this.getParametros(),this.motivosCancelacion=this.utils.motivosCancelacion,this.motivosCancelacion.pop(),this.motivoCancelacion=this.motivosCancelacion[0],this.regimenesFiscales=this.utils.regimenesFiscales,this.siguienteFactura()},methods:{validaUsuario:function(){var e,t=this;this.usuario&&this.usuario.length>0&&this.clave&&this.clave.length>0&&(this.loaders.usuario=!0,this.$axios({method:"get",url:"".concat(f.backEndUrl,"/gusher/ws.prg?mod=usuario"),params:{id:this.usuario,clave:this.clave,opt:"canfac"}}).then((function(r){r.data&&200==r.data.response?t.dialog.login=!1:r.data&&404==r.data.response||r.data&&500==r.data.response?(t.$refs.snackBar.text=r.data.msg,t.$refs.snackBar.color="orange darken-4",t.$refs.snackBar.snackBar=!0):(e=r.data.msg?r.data.msg:r.data,t.$refs.snackBar.text="Error: "+e,t.$refs.snackBar.color="orange darken-4",t.$refs.snackBar.snackBar=!0)})).catch((function(e){console.log("resp err",e),t.$refs.snackBar.text="object"==Object(n.a)(e)?JSON.stringify(e):e,t.$refs.snackBar.color="orange darken-4",t.$refs.snackBar.snackBar=!0})).finally((function(){t.loaders.usuario=!1})))},getParametros:function(){var e=this;this.alert.msg="",this.$axios({method:"get",url:"".concat(f.backEndUrl,"/gusher/ws.prg?mod=parametros")}).then((function(t){200==t.data.response?(e.serie=t.data.data.serie,e.domicilioFiscal=t.data.data.codPos):e.alert.msg="Problemas con el Servidor (".concat(t.data.response," ").concat(t.data.msg,")")})).catch((function(t){e.alert.msg=t})).finally((function(){e.alert.active=""!=e.alert.msg}))},onClick:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rfc",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("RECUPERAR_FOLIO"==e)this.alert.msg="",this.warning.msg="",this.warning.active=!1,this.recibo.caja="",this.recibo.folio="",this.recibo.cajaFolio="",this.recibo.fecha="",this.recibo.importe=0,this.recibo.tipo="",this.recibo.cancelada="",this.$axios({method:"get",url:"/api/recibo/".concat(this.facturaOriginal.folio.toString().padStart(8,"0"),"/get")}).then((function(e){200==e.data.response?"G"==e.data.data.tipo?t.alert.msg="La Factura es de tipo Global, no se puede Refacturar":(t.recibo=e.data.data,t.recibo.cajaFolio=e.data.data.caja+"-"+e.data.data.folio,"S"==t.recibo.cancelada&&(t.warning.type="yellow",t.warning.msg="La Factura ".concat(t.facturaOriginal.folio," ya se canceló"),t.alert.msg="La Factura ".concat(t.facturaOriginal.folio," ya se canceló"))):(t.warning.msg="La venta (Caja y Folio) no se ha encontrado",t.warning.active=!0)})).catch((function(e){console.log("Error al recuperar el Recibo de Venta",e),t.alert.msg=e})).finally((function(){t.alert.active=""!=t.alert.msg,t.warning.active=""!=t.warning.msg})),this.loaders.recuperarFolio=!0,this.facturaOriginal.pdfBase64="",this.facturaOriginal.xml="",this.facturaOriginal.uuid="",this.alert.msg="",this.$axios({method:"get",url:"/api/recuperarCFDI/".concat(this.serie).concat(this.facturaOriginal.folio.toString().padStart(8,"0"))}).then((function(e){1==e.data.result.retcode?(t.facturaOriginal.pdfBase64=e.data.result.result.pdfBase64,t.facturaOriginal.xml=e.data.result.result.xml,t.facturaOriginal.uuid=e.data.result.result.uuid,t.XmlParse()):null==e.data.result.result.error?t.alert.msg="Se detectó un error indefinido por parte de iTimbre":t.alert.msg=e.data.result.result.error})).catch((function(e){console.log("Error al recuperar CFDI",e),t.alert.msg=e})).finally((function(){t.loaders.recuperarFolio=!1,t.alert.active=""!=t.alert.msg}));else if("ABRIR_PDF"==e){this.loaders.abrirPdf=!0;var n=window.open();n.document.write('<iframe src="data:application/pdf;base64,'.concat(this.facturaOriginal.pdfBase64,'" frameborder="0" style="border:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" allowfullscreen></iframe>')),n.document.title=this.serie+"-"+this.facturaOriginal.folio,this.loaders.abrirPdf=!1}else if("BUSCAR_CLIENTE"==e){var l,c=c="/api/cliente/".concat(r);if(this.cliente.rfc=this.cliente.rfc.toUpperCase(),this.cliente.rfc.length<12||this.cliente.rfc.length>13)return;l=12==this.cliente.rfc.length?" "+this.cliente.rfc:this.cliente.rfc,l="".concat(l.substring(0,4),"-").concat(l.substring(4,10),"-").concat(l.substring(10,13)),this.loaders.buscarCliente=!0,this.alert.msg="",this.cliente.recNo=0,this.cliente.numero="",this.cliente.razonSocial="",this.cliente.razonSocial1="",this.cliente.razonSocial2="",this.cliente.domicilio="",this.cliente.numExterior="",this.cliente.numInterior="",this.cliente.colonia="",this.cliente.ciudad="",this.cliente.estado="",this.cliente.codPos="",this.cliente.tel1="",this.cliente.tel2="",this.cliente.curp="",this.cliente.email="",this.cliente.regFiscal=null,this.cliente.nuevo=!0,c+="/".concat("recno"==r?o:l),this.$axios({method:"get",url:c}).then((function(e){console.log("resp.data",e.data),200==e.data.response||500==e.data.response?(t.cliente.recNo=e.data.data.recNo,t.cliente.numero=e.data.data.mNumero,t.cliente.razonSocial=e.data.data.mNombre,t.cliente.razonSocial1=e.data.data.mNombre,t.cliente.razonSocial2=e.data.data.razon01,t.cliente.domicilio=e.data.data.mDomi1,t.cliente.numExterior=e.data.data.mNumExt,t.cliente.numInterior=e.data.data.mNumInt,t.cliente.colonia=e.data.data.mDomi2,t.cliente.ciudad=e.data.data.mCiudad,t.cliente.estado=e.data.data.mEstado,t.cliente.codPos=e.data.data.mZP,t.cliente.tel1=e.data.data.mTele1,t.cliente.tel2=e.data.data.mTele2,t.cliente.curp=e.data.data.mCurp,t.cliente.email=e.data.data.mEmail,t.cliente.regFiscal=t.regimenesFiscales.find((function(t){return t.substring(0,3)==e.data.data.regFiscal})),t.cliente.regFiscal=null==t.cliente.regFiscal||null==t.cliente.regFiscal?"":t.cliente.regFiscal,t.cliente.nuevo=200!=e.data.response):t.alert.msg=e.data.msg})).catch((function(e){t.alert.msg=e})).finally((function(){t.alert.active=""!=t.alert.msg,t.loaders.buscarCliente=!1}))}else if("BUSCAR_CLIENTES"==e)this.loaders.search=!0,this.alert.msg="",this.tabla.clientes=[],this.$axios({method:"get",url:"/api/clientes/".concat(this.search)}).then((function(e){200==e.data.response?t.tabla.clientes=e.data.data:t.alert.msg="Problemas con el Servidor (".concat(e.data.response," ").concat(e.data.msg,")")})).catch((function(e){t.alert.msg=e})).finally((function(){t.loaders.search=!1,t.alert.active=""!=t.alert.msg}));else if("ACTUALIZAR_CLIENTE"==e){this.warning.msg="";var d=(new Date).toLocaleDateString("en-CA");if(d>="2022-07-01"&&!this.cliente.regFiscal)return this.warning.msg="El Régimen Fiscal es obligatorio",this.warning.active=!0,void this.$nextTick((function(){t.$refs.regFiscal.focus()}));if(null==this.cliente.rfc||null==this.cliente.rfc||""==this.cliente.rfc)return this.warning.msg="Es necesario el RFC del Cliente",this.warning.active=!0,void this.$nextTick((function(){t.$refs.refRfc.focus()}));if(!this.cliente.razonSocial1)return this.warning.msg="Es necesaria la Razón Social",this.warning.active=!0,void this.$nextTick((function(){t.$refs.razonSocial1.focus()}));this.cliente.rfc=this.cliente.rfc.toUpperCase();var m=12==this.cliente.rfc.length?" "+this.cliente.rfc:this.cliente.rfc;m="".concat(m.substring(0,4),"-").concat(m.substring(4,10),"-").concat(m.substring(10,13)),this.loaders.grabaCliente=!0,this.alert.msg="",this.alert.type="",this.warning.msg="",this.warning.type="",this.$axios({method:"post",url:"/api/cliente",data:{rfc:m,recno:this.cliente.recNo,numero:this.cliente.numero,nombre:this.cliente.razonSocial1,razon01:this.cliente.razonSocial2,domi1:this.cliente.domicilio,numExt:this.cliente.numExterior,numInt:this.cliente.numInterior,domi2:this.cliente.colonia,ciudad:this.cliente.ciudad,estado:this.cliente.estado,zp:this.cliente.codPos,tele1:this.cliente.tel1,tele2:this.cliente.tel2,curp:this.cliente.curp,email:this.cliente.email,regFiscal:this.cliente.regFiscal?this.cliente.regFiscal.substring(0,3):""}}).then((function(e){console.log("resp.data",e.data),200==e.data.response?(t.cliente.nuevo=!1,t.warning.msg="Cliente actualizado correctamente",t.warning.type="success"):(t.alert.msg=e.data.msg,t.alert.type="yellow")})).catch((function(e){t.alert.msg=e})).finally((function(){t.loaders.grabaCliente=!1,t.alert.active=""!=t.alert.msg,t.warning.active=""!=t.warning.msg}))}else if("DLG_SEARCH"==e)this.dlgBuscar=!0,this.$nextTick((function(){t.$refs.search.focus()}));else if("ALTERNAR_RAZON_SOCIAL"==e){var f=this.cliente.razonSocial1,v=this.cliente.razonSocial2;this.cliente.razonSocial1=v,this.cliente.razonSocial2=f}else if("GENERAR_FACTURA"==e){if(!this.facturaOriginal.metodoPago)return this.warning.msg="Es necesario indicar el Método de Pago",this.warning.active=!0,void this.$nextTick((function(){t.$refs.refMetodoPago.focus()}));if(!this.facturaOriginal.formaPago)return this.warning.msg="Es necesario indicar la Forma de Pago",this.warning.active=!0,void this.$nextTick((function(){t.$refs.refFormaPago.focus()}));if(!this.facturaOriginal.usoCfdi)return this.warning.msg="Es necesario indicar el uso del CFDI",this.warning.active=!0,void this.$nextTick((function(){t.$refs.refUsoCfdi.focus()}));if(!this.folio)return this.warning.msg="Es necesario indicar Folio",this.warning.active=!0,void this.$nextTick((function(){t.$refs.refFolio.focus()}));this.facturaOriginal.correo=this.cliente.email,this.facturaOriginal.idCliente=this.cliente.numero,this.facturaOriginal.domicilioFiscalReceptor=this.cliente.codPos,this.facturaOriginal.regimenFiscalReceptor=this.cliente.regFiscal,this.facturaOriginal.nombre=this.cliente.razonSocial1,this.facturaOriginal.rfc=this.cliente.rfc,this.facturaOriginal.serie=this.serie;var data=this.facturaOriginal;data.pdfBase64="",data.xml="",this.factura.folio=this.folio,this.factura.uuid="",this.loaders.generaFactura=!0,this.alert.msg="",this.alert.type="",this.warning.msg="",this.warning.type="";var h=!1;this.$axios({method:"post",url:"/api/facturar",data:{data:this.creaEstructura(),factura:{folio:"".concat(this.recibo.caja).concat(this.recibo.folio.padStart(8," ")),numero:this.cliente.numero,nombre:this.cliente.razonSocial1,rfc:this.cliente.rfc,factura:this.folio,fecha:(new Date).toLocaleDateString("fr-FR"),importe:this.facturaOriginal.data.Total,iva:this.facturaOriginal.data.Impuestos.TotalImpuestosTrasladados,tasa0:this.facturaOriginal.bases.exento.base.toFixed(2),gravable:this.facturaOriginal.bases.gravable.base.toFixed(2),metodoPago:this.facturaOriginal.formaPago,usoCfdi:this.facturaOriginal.usoCfdi.substring(0,3),tipoComp:this.facturaOriginal.metodoPago,uuid:"",uuidRel:this.facturaOriginal.uuid,facRel:this.recibo.mFactura}}}).then((function(e){if(console.log("resp.data",e.data),-1==e.data.result.retcode)e.data.result.error?t.alert.msg=e.data.result.error:e.data.result.result.error?t.alert.msg=e.data.result.result.error:t.alert.msg="Mensaje indefinido de iTimbre: ".concat(e.data.result);else if(1==e.data.result.retcode){h=!0,t.factura.uuid=e.data.result.UUID,t.warning.type="success",t.warning.msg="Factura generada correctamente";var r=window.open();r.document.write('<iframe src="data:application/pdf;base64,'.concat(e.data.result.pdfBase64,'" frameborder="0" style="border:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" allowfullscreen></iframe>')),r.document.title=t.serie+"-"+t.folio,t.recibo.cancelada="S"}else t.alert.msg=e.data.result})).catch((function(e){console.log("Error",e),t.alert.msg=e})).finally((function(){t.loaders.generaFactura=!1,t.alert.active=""!=t.alert.msg,t.warning.active=""!=t.warning.msg,h&&t.cancelaFactura()}))}},onClickRow:function(e){console.log("item",e),this.cliente.rfc=e.mRFC,this.cliente.recNo=e.recNo,this.onClick("BUSCAR_CLIENTE","recno",e.recNo),this.dlgBuscar=!1},dialogoBuscar:function(){this.dlgBuscar=!0,this.$refs.search.$refs.input.focus()},onChangeRegimenFiscal:function(e){this.warning.msg="",this.warning.active=!1},xmlDownload:function(){var element=document.createElement("a");element.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(this.facturaOriginal.xml)),element.setAttribute("download","".concat(this.serie).concat(this.facturaOriginal.folio,".xml")),element.style.display="none",document.body.appendChild(element),element.click(),document.body.removeChild(element)},XmlParse:function(){try{this.facturaOriginal.data={},this.facturaOriginal.detalle=[];var e=(new DOMParser).parseFromString(this.facturaOriginal.xml,"text/xml"),t=e.getElementsByTagName("cfdi:Emisor")[0],data={Emisor:{Nombre:t.getAttribute("Nombre"),RegimenFiscal:t.getAttribute("RegimenFiscal"),Rfc:t.getAttribute("Rfc")},Serie:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("Serie"),Folio:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("Folio"),MetodoPago:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("MetodoPago"),FormaPago:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("FormaPago"),CondicionesDePago:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("CondicionesDePago"),Nombre:e.getElementsByTagName("cfdi:Receptor")[0].getAttribute("Nombre"),Rfc:e.getElementsByTagName("cfdi:Receptor")[0].getAttribute("Rfc"),UsoCFDI:e.getElementsByTagName("cfdi:Receptor")[0].getAttribute("UsoCFDI"),Version:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("Version"),Fecha:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("Fecha"),FechaTimbrado:e.getElementsByTagName("tfd:TimbreFiscalDigital")[0].getAttribute("FechaTimbrado"),NoCertificado:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("NoCertificado"),LugarExpedicion:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("LugarExpedicion"),cfdiVersion:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("Version"),RfcProvCertif:e.getElementsByTagName("tfd:TimbreFiscalDigital")[0].getAttribute("RfcProvCertif"),uuid:e.getElementsByTagName("tfd:TimbreFiscalDigital")[0].getAttribute("UUID"),versionXML:e.getElementsByTagName("tfd:TimbreFiscalDigital")[0].getAttribute("Version"),NoCertificadoSAT:e.getElementsByTagName("tfd:TimbreFiscalDigital")[0].getAttribute("NoCertificadoSAT"),SubTotal:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("SubTotal"),Total:e.getElementsByTagName("cfdi:Comprobante")[0].getAttribute("Total")},r=e.getElementsByTagName("cfdi:Conceptos")[0],o=e.getElementsByTagName("cfdi:Traslados");data.TotalImpuestosRetenidos="0.00",data.TotalImpuestosTrasladados=0;for(var n,l=[],c={exento:{base:0,suma:0,factor:0,incluir:!1},gravable:{base:0,suma:0,factor:0,incluir:!1}},d=0;d<r.childElementCount;d++){var m=r.childNodes[d],f=m.getAttribute("Descuento")?m.getAttribute("Descuento"):"0.00",v=o[d].childNodes[0].getAttribute("TasaOCuota");0==Number(v)?(c.exento.base+=Number(o[d].childNodes[0].getAttribute("Base")),c.exento.suma+=Number(o[d].childNodes[0].getAttribute("Importe")),c.exento.factor=v,c.exento.incluir=!0):(c.gravable.base+=Number(o[d].childNodes[0].getAttribute("Base")),c.gravable.suma+=Number(o[d].childNodes[0].getAttribute("Importe")),c.gravable.factor=v,c.gravable.incluir=!0),l.push({Cantidad:m.getAttribute("Cantidad"),ClaveProdServ:m.getAttribute("ClaveProdServ"),ClaveUnidad:m.getAttribute("ClaveUnidad"),Descripcion:m.getAttribute("Descripcion"),Descuento:f,Importe:m.getAttribute("Importe"),NoIdentificacion:m.getAttribute("NoIdentificacion"),Unidad:m.getAttribute("Unidad"),ValorUnitario:m.getAttribute("ValorUnitario"),subTotal:m.getAttribute("Importe"),total:(Number(m.getAttribute("Importe"))-Number(f)).toString(),ObjetoImp:"02",Impuestos:{Traslados:[{Base:o[d].childNodes[0].getAttribute("Base"),Importe:o[d].childNodes[0].getAttribute("Importe"),Impuesto:o[d].childNodes[0].getAttribute("Impuesto"),TasaOCuota:v,TipoFactor:o[d].childNodes[0].getAttribute("TipoFactor")}]},totalNeto:(Number(m.getAttribute("Importe"))-Number(f)+Number(o[d].childNodes[0].getAttribute("Importe"))).toString()}),data.TotalImpuestosTrasladados+=Number(o[d].childNodes[0].getAttribute("Importe"))}data.Impuestos={TotalImpuestosRetenidos:"0.00",TotalImpuestosTrasladados:data.TotalImpuestosTrasladados.toString(),Traslados:[]},c.gravable.incluir&&data.Impuestos.Traslados.push({Base:c.gravable.base.toFixed(2),Impuesto:"002",TipoFactor:"Tasa",TasaOCuota:c.gravable.factor,Importe:c.gravable.suma.toFixed(2)}),c.exento.incluir&&data.Impuestos.Traslados.push({Base:c.exento.base.toFixed(2),Impuesto:"002",TipoFactor:"Tasa",TasaOCuota:c.exento.factor,Importe:c.exento.suma.toFixed(2)}),data.detalle=l,this.facturaOriginal.data=data,this.facturaOriginal.bases=c,console.log("data....",this.facturaOriginal.data),this.tablaFactura.items=data.detalle,this.cliente.rfc=data.Rfc,n=this.utils.metodosDePago.findIndex((function(e){return e==data.MetodoPago})),this.facturaOriginal.metodoPago=n>=0?this.utils.metodosDePago[n]:null,n=this.utils.formasDePago.findIndex((function(e){return e.substring(0,2)==data.FormaPago})),this.facturaOriginal.formaPago=n>=0?this.utils.formasDePago[n]:null,n=this.utils.usosCfdi.findIndex((function(e){return e.substring(0,3)==data.UsoCFDI})),this.facturaOriginal.usoCfdi=n>=0?this.utils.usosCfdi[n]:null,this.facturaOriginal.condiciones=data.CondicionesDePago,this.onClick("BUSCAR_CLIENTE")}catch(e){console.log("Error",e),this.warning.msg=e,this.warning.active=!0}},sumField:function(e){this.utils.formatNumber(this.tablaFactura.items.reduce((function(a,b){return a+(b[e]||0)}),0));return this.utils.formatNumber(this.tablaFactura.items.reduce((function(a,b){return a+(b[e]||0)}),0))},onChange:function(e){},creaEstructura:function(){return this.siguienteFactura(),{id_transaccion:0,cliente:{id:this.cliente.numero,UsoCFDI:this.facturaOriginal.usoCfdi.substring(3,0),nombre:this.cliente.razonSocial1,rfc:this.cliente.rfc,DomicilioFiscalReceptor:this.cliente.codPos,RegimenFiscalReceptor:this.cliente.regFiscal.substring(0,3),correo:this.cliente.email},datos_factura:{Serie:this.serie,Folio:this.folio,Version:"4.0",cfdiVersion:"4.0",FormaPago:this.facturaOriginal.formaPago.substring(0,2),TipoCambio:"1",MetodoPago:this.facturaOriginal.metodoPago,RegimenFiscal:this.facturaOriginal.data.Emisor.RegimenFiscal,LugarExpedicion:this.facturaOriginal.data.LugarExpedicion,Moneda:"MXN",TipoDeComprobante:"I",Exportacion:"01",CondicionesDePago:this.facturaOriginal.condiciones,no_sucursal:"0",SubTotal:this.facturaOriginal.data.SubTotal,Total:this.facturaOriginal.data.Total,Impuestos:this.facturaOriginal.data.Impuestos,CfdiRelacionados:[{TipoRelacion:"04",CfdiRelacionado:[{UUID:this.facturaOriginal.uuid}]}]},conceptos:this.facturaOriginal.data.detalle,comentarios:"Caja-Folio: ".concat(this.recibo.cajaFolio," | ").concat(this.recibo.fecha," | Cajero ").concat(this.recibo.cajero," | Vendedor ").concat(this.recibo.vendedor," | Cuenta ").concat(this.recibo.cuenta)}},siguienteFactura:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios({method:"get",url:"".concat(f.backEndUrl,"/gusher/ws.prg?mod=siguiente-factura")});case 2:r=t.sent,e.folio=r.data.data.folio;case 4:case"end":return t.stop()}}),t)})))()},cancelaFactura:function(){var e=this;this.loaders.generaFactura=!0,this.alert.msg="",this.warning.msg="",this.$axios({method:"post",url:"/api/cancelarFactura",data:{dataPac:{uuid:this.facturaOriginal.uuid,Motivo:this.motivoCancelacion.substring(0,2),FolioSustitucion:this.factura.uuid},dataFact:{factura:this.facturaOriginal.folio.padStart(8,"0"),facRel:this.folio.padStart(8,"0"),motivoCanc:this.motivoCancelacion.substring(0,2),motivo:"".concat(this.motivoCancelacion.substring(0,2)," - Datos Incorrectos del Cliente"),uuidRel:this.factura.uuid,usuario:this.usuario}}}).then((function(t){console.log("cancelaFactura() resp.data",t.data),-1==t.data.result.retcode?t.data.result.error?e.alert.msg=t.data.result.error:t.data.result.result.error?e.alert.msg=t.data.result.result.error:e.alert.msg="Mensaje indefinido de iTimbre: ".concat(t.data.result):1==t.data.result.retcode?(e.warning.type="success",t.data.result.folios?e.warning.msg=t.data.result.folios[0]:e.warning.msg="Cancelación realizada correctamente"):(e.warning.msg=t.data.result,e.warning.type="yellow",e.alert.msg=t.data.result,e.alert.type="yellow")})).catch((function(t){console.log("Error",t),e.alert.msg=t})).finally((function(){e.loaders.generaFactura=!1,e.alert.active=""!=e.alert.msg,e.warning.active=""!=e.warning.msg}))}}},h=v,C=(r(573),r(91)),x=r(125),k=r.n(x),y=r(572),_=r(224),F=r(436),T=r(418),w=r(479),O=r(443),N=r(616),E=r(611),S=r(478),P=r(548),A=r(184),I=r(627),R=r(613),B=r(446),D=r(492),$=r(416),U=r(567),z=r(614),V=r(628),L=r(625),j=r(605),M=r(604),G=r(51),Z=r(198),component=Object(C.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mx-2"},[r("v-row",{staticClass:"mt-4"}),e._v(" "),r("v-dialog",{attrs:{width:"500"},model:{value:e.alert.active,callback:function(t){e.$set(e.alert,"active",t)},expression:"alert.active"}},[r("v-card",[r("v-card-title",{class:""==e.alert.type?"text-h6 mb-4 orange darken-3":"text-h6 mb-4 green darken-3"},[r("v-icon",[e._v(e._s(""==e.alert.type?"mdi-alert":"mdi-check"))]),e._v(" "),r("span",{staticClass:"ml-2"},[e._v("Atención")])],1),e._v(" "),r("v-card-text",{class:""==e.alert.type?"subtitle-1 orange--text text--darken-3":"text-h6"},[e._v("\n        "+e._s(e.alert.msg)+"\n      ")]),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue lighten-2",plain:""},on:{click:function(t){e.alert.active=!1,e.alert.msg="",e.alert.type=""}}},[e._v("\n          Ok\n        ")])],1)],1)],1),e._v(" "),r("v-form",{ref:"form1"},[r("v-row",[r("v-col",{attrs:{md:"1"}},[r("v-text-field",{attrs:{label:"Serie",dense:"",readonly:""},model:{value:e.serie,callback:function(t){e.serie=t},expression:"serie"}})],1),e._v(" "),r("v-col",{attrs:{md:"2"}},[r("v-text-field",{attrs:{type:"number",label:"Folio a Cancelar",dense:"",loading:e.loaders.recuperarFolio,disabled:e.loaders.recuperarFolio},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.onClick("RECUPERAR_FOLIO"))}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{icon:"",small:"",loading:e.loaders.recuperarFolio},on:{click:function(t){return e.onClick("RECUPERAR_FOLIO")}}},[r("v-icon",[e._v("mdi-magnify")])],1),e._v(" "),r("v-btn",{attrs:{icon:"",small:"",color:"green lighten-1",disabled:""==e.facturaOriginal.pdfBase64,loading:e.loaders.abrirPdf},on:{click:function(t){e.xmlDownload(),e.onClick("ABRIR_PDF")}}},[r("v-icon",[e._v("mdi-download")])],1)]},proxy:!0}]),model:{value:e.facturaOriginal.folio,callback:function(t){e.$set(e.facturaOriginal,"folio",t)},expression:"facturaOriginal.folio"}})],1),e._v(" "),r("v-col",{attrs:{md:"4"}},[r("v-text-field",{staticStyle:{"font-size":"0.95rem"},attrs:{label:"UUID",dense:"",readonly:"",loading:e.loaders.recuperarFolio},model:{value:e.facturaOriginal.uuid,callback:function(t){e.$set(e.facturaOriginal,"uuid",t)},expression:"facturaOriginal.uuid"}})],1),e._v(" "),r("v-col",{attrs:{md:"1"}},[r("v-text-field",{staticStyle:{"font-size":"0.91rem"},attrs:{label:"Caja-Folio",dense:"",readonly:""},model:{value:e.recibo.cajaFolio,callback:function(t){e.$set(e.recibo,"cajaFolio",t)},expression:"recibo.cajaFolio"}})],1),e._v(" "),r("v-col",{attrs:{md:"2"}},[r("v-text-field",{attrs:{label:"Fecha",dense:"",readonly:""},model:{value:e.recibo.fecha,callback:function(t){e.$set(e.recibo,"fecha",t)},expression:"recibo.fecha"}})],1),e._v(" "),r("v-col",{attrs:{md:"1"}},[r("v-text-field",{staticStyle:{"font-size":"0.93rem"},attrs:{label:"Importe",dense:"",readonly:""},model:{value:e.recibo.importe,callback:function(t){e.$set(e.recibo,"importe",t)},expression:"recibo.importe"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{md:"5"}},[r("v-select",{attrs:{items:e.motivosCancelacion,outlined:"",label:"Motivo de Cancelación",filled:"","item-color":"blue",readonly:"",dense:""},model:{value:e.motivoCancelacion,callback:function(t){e.motivoCancelacion=t},expression:"motivoCancelacion"}})],1),e._v(" "),r("v-col",{attrs:{md:"7"}},[r("v-alert",{attrs:{border:"left",color:e.warning.type,dismissible:"",elevation:"10",icon:"mdi-alert",outlined:"",type:"warning"},model:{value:e.warning.active,callback:function(t){e.$set(e.warning,"active",t)},expression:"warning.active"}},[r("div",{staticClass:"text-t5"},[e._v(e._s(e.warning.msg))])])],1)],1)],1),e._v(" "),r("v-card",{staticClass:"mt-2",attrs:{outlined:""}},[r("v-card-text",[r("v-tabs",{staticClass:"mb-0",attrs:{color:"primary",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[r("v-tab",{attrs:{href:"#cliente"}},[e._v("Cliente")]),e._v(" "),r("v-tab",{attrs:{href:"#factura"}},[e._v("Detalle de Factura")])],1),e._v(" "),r("v-divider"),e._v(" "),r("v-tabs-items",{staticClass:"mb-2",model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[r("v-tab-item",{attrs:{value:"cliente"}},[r("v-form",{ref:"frmCliente",model:{value:e.forms.cliente,callback:function(t){e.$set(e.forms,"cliente",t)},expression:"forms.cliente"}},[r("v-row",{staticClass:"mt-2"},[r("v-col",{attrs:{md:"1"}},[r("v-btn",{attrs:{color:"primary",dark:"",fab:""},on:{click:function(t){return e.onClick("DLG_SEARCH")}}},[r("v-icon",[e._v("mdi-magnify")])],1)],1),e._v(" "),r("v-col",{attrs:{md:"2"}},[r("v-text-field",{ref:"refRfc",staticStyle:{"font-size":"0.9rem"},attrs:{label:"R.F.C. Cliente",dense:"",hint:"Sin guiones",maxlength:"13",rules:[function(e){return null!=e&&e.length>=12&&e.length<=13||"12 o 13 Caractéres"}],disabled:e.loaders.buscarCliente},on:{keyup:[function(t){e.cliente.rfc=e.cliente.rfc.toUpperCase()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.onClick("BUSCAR_CLIENTE"))}]},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{icon:"",loading:e.loaders.buscarCliente,disabled:e.cliente.rfc.length<12||e.cliente.rfc.length>13},on:{click:function(t){return e.onClick("BUSCAR_CLIENTE")}}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}]),model:{value:e.cliente.rfc,callback:function(t){e.$set(e.cliente,"rfc",t)},expression:"cliente.rfc"}})],1),e._v(" "),r("v-col",{attrs:{md:"1"}},[r("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.cliente.nuevo,expression:"cliente.nuevo"}],staticClass:"mt-2",attrs:{color:"success",outlined:""}},[e._v("\n                  Nuevo\n                ")])],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-col",{attrs:{md:"7"}},[r("v-select",{ref:"regFiscal",attrs:{label:"Régimen Fiscal","item-color":"blue",items:e.regimenesFiscales,outlined:"",filled:"",dense:""},on:{change:e.onChangeRegimenFiscal},model:{value:e.cliente.regFiscal,callback:function(t){e.$set(e.cliente,"regFiscal",t)},expression:"cliente.regFiscal"}})],1)],1),e._v(" "),r("v-row",{staticClass:"my-0 py-0 pr-1"},[r("v-col",{attrs:{md:"12"}},[r("v-text-field",{ref:"razonSocial1",staticStyle:{"font-size":"0.9rem"},attrs:{label:"Razón Social (para timbrar)",dense:"",maxlength:"160","append-outer-icon":"mdi-arrow-down",rules:[function(e){return null!=e&&e.length>=1&&e.length<=160||"Dato obligatorio"}]},on:{"click:append-outer":function(t){return e.onClick("ALTERNAR_RAZON_SOCIAL")}},model:{value:e.cliente.razonSocial1,callback:function(t){e.$set(e.cliente,"razonSocial1",t)},expression:"cliente.razonSocial1"}})],1)],1),e._v(" "),r("v-row",{staticClass:"my-0 py-0 pr-1"},[r("v-col",{attrs:{md:"12"}},[r("v-text-field",{staticStyle:{"font-size":"0.9rem"},attrs:{label:"Razón Social (Alternativo)",dense:"",maxlength:"160","append-outer-icon":"mdi-arrow-up"},on:{"click:append-outer":function(t){return e.onClick("ALTERNAR_RAZON_SOCIAL")}},model:{value:e.cliente.razonSocial2,callback:function(t){e.$set(e.cliente,"razonSocial2",t)},expression:"cliente.razonSocial2"}})],1)],1),e._v(" "),r("v-row",{staticClass:"my-0 py-0"},[r("v-col",{attrs:{md:"12"}},[r("v-text-field",{attrs:{label:"Domicilio",dense:"",maxlength:"55"},model:{value:e.cliente.domicilio,callback:function(t){e.$set(e.cliente,"domicilio",t)},expression:"cliente.domicilio"}})],1)],1),e._v(" "),r("v-row",{staticClass:"my-0 py-0"},[r("v-col",{attrs:{md:"1"}},[r("v-text-field",{attrs:{label:"# Exterior",dense:"",maxlength:"10"},model:{value:e.cliente.numExterior,callback:function(t){e.$set(e.cliente,"numExterior",t)},expression:"cliente.numExterior"}})],1),e._v(" "),r("v-col",{attrs:{md:"1"}},[r("v-text-field",{attrs:{label:"# Interior",dense:"",maxlength:"10"},model:{value:e.cliente.numInterior,callback:function(t){e.$set(e.cliente,"numInterior",t)},expression:"cliente.numInterior"}})],1),e._v(" "),r("v-col",{attrs:{md:"3"}},[r("v-text-field",{attrs:{label:"Colonia",dense:"",maxlength:"55"},model:{value:e.cliente.colonia,callback:function(t){e.$set(e.cliente,"colonia",t)},expression:"cliente.colonia"}})],1),e._v(" "),r("v-col",{attrs:{md:"2"}},[r("v-text-field",{attrs:{label:"Ciudad",dense:"",maxlength:"20"},model:{value:e.cliente.ciudad,callback:function(t){e.$set(e.cliente,"ciudad",t)},expression:"cliente.ciudad"}})],1),e._v(" "),r("v-col",{attrs:{md:"2"}},[r("v-text-field",{attrs:{label:"Estado",dense:"",maxlength:"15"},model:{value:e.cliente.estado,callback:function(t){e.$set(e.cliente,"estado",t)},expression:"cliente.estado"}})],1),e._v(" "),r("v-col",{attrs:{md:"1"}},[r("v-text-field",{attrs:{type:"number",label:"C.P.",dense:"",maxlength:"5",rules:[function(e){return 5==e.length||"Incorrecto"}]},model:{value:e.cliente.codPos,callback:function(t){e.$set(e.cliente,"codPos",t)},expression:"cliente.codPos"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{md:"2"}},[r("v-text-field",{attrs:{label:"Teléfono 1",dense:"",maxlength:"15"},model:{value:e.cliente.tel1,callback:function(t){e.$set(e.cliente,"tel1",t)},expression:"cliente.tel1"}})],1),e._v(" "),r("v-col",{attrs:{md:"2"}},[r("v-text-field",{attrs:{label:"Teléfono 2",dense:"",maxlength:"15"},model:{value:e.cliente.tel2,callback:function(t){e.$set(e.cliente,"tel2",t)},expression:"cliente.tel2"}})],1),e._v(" "),r("v-col",{attrs:{md:"2"}},[r("v-text-field",{attrs:{label:"CURP",dense:"",maxlength:"20"},model:{value:e.cliente.curp,callback:function(t){e.$set(e.cliente,"curp",t)},expression:"cliente.curp"}})],1),e._v(" "),r("v-col",{attrs:{md:"6"}},[r("v-text-field",{attrs:{label:"Email",dense:"",maxlength:"50",rules:[function(e){return!!e||"El Correo es obligatorio"},function(e){return/^[^\s@]+@([^\s@.,]+\.)+[^\s@.,]{2,}$/.test(e)||"Formato de Correo incorrecto"}]},model:{value:e.cliente.email,callback:function(t){e.$set(e.cliente,"email",t)},expression:"cliente.email"}})],1)],1),e._v(" "),r("v-row",[r("v-spacer"),e._v(" "),r("v-col",{attrs:{md:"auto"}},[r("v-btn",{attrs:{color:"primary",loading:e.loaders.grabaCliente,disabled:!e.forms.cliente},on:{click:function(t){return e.onClick("ACTUALIZAR_CLIENTE")}}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-content-save")]),e._v("\n                  Actualizar Cliente\n                ")],1)],1)],1)],1)],1),e._v(" "),r("v-tab-item",{attrs:{value:"factura"}},[r("v-data-table",{staticClass:"mt-3",attrs:{headers:e.tablaFactura.headers,items:e.tablaFactura.items,"pagination.sync":"tabla.pagination","footer-props":e.footerProps,"item-key":"NoIdentificacion",loading:e.loaders.tablaFactura,"loading-text":"Leyendo...","no-data-text":"Sin registros",dense:""},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-row",{staticClass:"mt-2"},[r("v-col",{attrs:{md:"1"}},[r("v-text-field",{ref:"refFolio",staticStyle:{"font-size":"0.99em"},attrs:{label:"Folio",dense:"",rules:[function(e){return!!e||"Obligatorio"}]},model:{value:e.folio,callback:function(t){e.folio=t},expression:"folio"}})],1),e._v(" "),r("v-col",{attrs:{md:"2"}},[r("v-select",{ref:"refMetodoPago",attrs:{items:e.utils.metodosDePago,outlined:"",filled:"",label:"Método de pago",rules:[function(e){return!!e||"Dato obligatorio"}],dense:""},model:{value:e.facturaOriginal.metodoPago,callback:function(t){e.$set(e.facturaOriginal,"metodoPago",t)},expression:"facturaOriginal.metodoPago"}})],1),e._v(" "),r("v-col",{attrs:{md:"3"}},[r("v-select",{ref:"refFormaPago",attrs:{items:e.utils.formasDePago,outlined:"",filled:"",label:"Forma de Pago",rules:[function(e){return!!e||"Dato obligatorio"}],dense:""},model:{value:e.facturaOriginal.formaPago,callback:function(t){e.$set(e.facturaOriginal,"formaPago",t)},expression:"facturaOriginal.formaPago"}})],1),e._v(" "),r("v-col",{attrs:{md:"3"}},[r("v-select",{ref:"refUsoCfdi",attrs:{items:e.utils.usosCfdi,outlined:"",filled:"",label:"Uso del CFDI",rules:[function(e){return!!e||"Dato obligatorio"}],dense:""},model:{value:e.facturaOriginal.usoCfdi,callback:function(t){e.$set(e.facturaOriginal,"usoCfdi",t)},expression:"facturaOriginal.usoCfdi"}})],1),e._v(" "),r("v-col",{attrs:{md:"1"}},[r("v-radio-group",{staticClass:"my-0 py-0",attrs:{mandatory:"",dense:""},model:{value:e.facturaOriginal.condiciones,callback:function(t){e.$set(e.facturaOriginal,"condiciones",t)},expression:"facturaOriginal.condiciones"}},[r("v-radio",{attrs:{label:"Contado",value:"Contado"}}),e._v(" "),r("v-radio",{attrs:{label:"Crédito",value:"Crédito"}})],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-col",{attrs:{md:"auto"}},[r("v-btn",{attrs:{color:"primary",loading:e.loaders.generaFactura,disabled:0==Number(e.facturaOriginal.detalle.Total)||e.cliente.nuevo||"S"==e.recibo.cancelada},on:{click:function(t){return e.onClick("GENERAR_FACTURA")}}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-check ")]),e._v("\n                  Facturar\n                ")],1)],1)],1),e._v(" "),r("v-divider",{staticClass:"my-0"})]},proxy:!0},{key:"item.ValorUnitario",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e.utils.formatNumber(r.ValorUnitario,6))+"\n          ")]}},{key:"item.subTotal",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e.utils.formatNumber(r.subTotal))+"\n          ")]}},{key:"item.Descuento",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e.utils.formatNumber(r.Descuento))+"\n          ")]}},{key:"item.total",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e.utils.formatNumber(r.total))+"\n          ")]}},{key:"item.Impuestos.Traslados[0].TasaOCuota",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e.utils.formatNumber(r.Impuestos.Traslados[0].TasaOCuota))+"\n          ")]}},{key:"item.Impuestos.Traslados[0].Importe",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e.utils.formatNumber(r.Impuestos.Traslados[0].Importe))+"\n          ")]}},{key:"item.Traslados.totalNeto",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e.utils.formatNumber(r.totalNeto))+"\n          ")]}}])},[e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),r("template",{slot:"body.append"},[r("tr",{staticClass:"light-green--text"},[r("th",{staticClass:"subtitle-2 text-center",attrs:{colspan:"10"}},[e._v("Total Factura: "+e._s(e.utils.formatNumber(Number(e.facturaOriginal.data.Total)))+" ")])])])],2)],1)],1)],1),e._v(" "),r("v-card-actions")],1),e._v(" "),r("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"620px",transition:"dialog-transition"},model:{value:e.dlgBuscar,callback:function(t){e.dlgBuscar=t},expression:"dlgBuscar"}},[r("v-card",{attrs:{elevation:"","max-width":""}},[r("v-system-bar",{staticClass:"mb-2",attrs:{color:"primary"}},[r("span",[e._v("Búsqueda de Clientes")]),e._v(" "),r("v-spacer"),e._v(" "),r("div",{staticClass:"text--primary d-flex justify-end"},[r("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){e.dlgBuscar=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1)],1),e._v(" "),r("v-card-text",{staticClass:"mt-3"},[r("v-text-field",{ref:"search",attrs:{label:"Buscar","background-color":"oscuro",dense:"",solo:"","hide-details":"",disabled:e.loaders.search},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.onClick("BUSCAR_CLIENTES"))}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{icon:"",loading:e.loaders.search},on:{click:function(t){return e.onClick("BUSCAR_CLIENTES")}}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}]),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-4",attrs:{headers:e.tabla.headers,items:e.tabla.clientes,"item-key":"recNo",loading:e.loaders.search,"loading-text":"Leyendo...","no-data-text":"No se encontraron registros","footer-props":e.footerProps,dense:""},on:{"click:row":e.onClickRow}})],1)],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialog.login,callback:function(t){e.$set(e.dialog,"login",t)},expression:"dialog.login"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dense:""}},[r("v-toolbar-title",{attrs:{dark:""}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-account")]),e._v("\n            Acceso\n          ")],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",to:"/"}},[r("v-icon",[e._v("mdi-close")])],1)],1),e._v(" "),r("v-card-text",[r("v-text-field",{staticClass:"mt-4",attrs:{label:"Usuario",rules:[function(e){return!!e||"Requerido"},function(e){return e.length>=2||"Mínimo 2 caractéres"},function(e){return e.length<=10||"Máximo 10 caractéres"}],maxlength:"10",autofocus:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validaUsuario()}},model:{value:e.usuario,callback:function(t){e.usuario=t},expression:"usuario"}}),e._v(" "),r("v-text-field",{staticClass:"mt-4",attrs:{"append-icon":e.viewPassword?"mdi-eye":"mdi-eye-off",type:e.viewPassword?"text":"password",label:"Contraseña",rules:[function(e){return!!e||"Requerido"}],maxlength:"10"},on:{"click:append":function(t){e.viewPassword=!e.viewPassword}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validaUsuario()}},model:{value:e.clave,callback:function(t){e.clave=t},expression:"clave"}})],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"primary",block:"",dark:"",disabled:!e.usuario||!e.clave,loading:e.loaders.usuario},nativeOn:{click:function(t){return e.validaUsuario()}}},[e._v("\n            Continuar\n          ")])],1)],1)],1),e._v(" "),r("snack-bar",{ref:"snackBar"})],1)}),[],!1,null,null,null);t.default=component.exports;k()(component,{VAlert:y.a,VBtn:_.a,VCard:F.a,VCardActions:T.a,VCardText:T.b,VCardTitle:T.c,VChip:w.a,VCol:O.a,VDataTable:N.a,VDialog:E.a,VDivider:S.a,VForm:P.a,VIcon:A.a,VRadio:I.a,VRadioGroup:R.a,VRow:B.a,VSelect:D.a,VSpacer:$.a,VSystemBar:U.a,VTab:z.a,VTabItem:V.a,VTabs:L.a,VTabsItems:j.a,VTextField:M.a,VToolbar:G.a,VToolbarTitle:Z.b})}}]);